<%- include('../layouts/layout', { 
    title: 'Login - EduLMS',
    pageStyles: ['/css/auth.css']
}) %>

<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header text-center mb-4">
            <img src="/images/logo.png" alt="EduLMS Logo" class="auth-logo">
            <h2 class="auth-title">Welcome Back</h2>
            <p class="auth-subtitle">Sign in to your account</p>
        </div>
        
        <form action="/auth/login" method="POST" class="auth-form">
            <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" value="<%= oldInput.email || '' %>" required>
                <% if (errors && errors.email) { %>
                    <div class="invalid-feedback d-block"><%= errors.email.msg %></div>
                <% } %>
            </div>
            
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="password-input-group">
                    <input type="password" class="form-control" id="password" name="password" required>
                    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <% if (errors && errors.password) { %>
                    <div class="invalid-feedback d-block"><%= errors.password.msg %></div>
                <% } %>
            </div>
            
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="remember" name="remember">
                <label class="form-check-label" for="remember">Remember me</label>
            </div>
            
            <button type="submit" class="btn btn-primary w-100 mb-3">
                <i class="fas fa-sign-in-alt me-2"></i>Sign In
            </button>
            
            <div class="text-center">
                <a href="/auth/forgot-password" class="text-decoration-none">Forgot your password?</a>
            </div>
        </form>
        
        <div class="auth-footer text-center mt-4">
            <p class="mb-0">Don't have an account? <a href="/auth/register" class="text-decoration-none">Sign up</a></p>
        </div>
        
        <!-- Demo Accounts -->
        <div class="demo-accounts mt-4">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">Demo Accounts</h6>
                    <div class="demo-account-list">
                        <div class="demo-account">
                            <strong>Admin:</strong> admin@edulms.edu / password
                        </div>
                        <div class="demo-account">
                            <strong>Student:</strong> student@edulms.edu / password
                        </div>
                        <div class="demo-account">
                            <strong>Instructor:</strong> instructor@edulms.edu / password
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.auth-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
}

.auth-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    padding: 2rem;
    width: 100%;
    max-width: 400px;
}

.auth-logo {
    height: 60px;
    margin-bottom: 1rem;
}

.auth-title {
    color: #333;
    margin-bottom: 0.5rem;
}

.auth-subtitle {
    color: #666;
    margin-bottom: 0;
}

.password-input-group {
    position: relative;
}

.toggle-password {
    position: absolute;
    right: 0;
    top: 0;
    height: 100%;
    border: none;
    background: transparent;
}

.demo-accounts {
    font-size: 0.9rem;
}

.demo-account {
    padding: 0.25rem 0;
    border-bottom: 1px solid #eee;
}

.demo-account:last-child {
    border-bottom: none;
}
</style>

<script>
// Toggle password visibility
document.querySelectorAll('.toggle-password').forEach(button => {
    button.addEventListener('click', function() {
        const targetId = this.dataset.target;
        const passwordInput = document.getElementById(targetId);
        const icon = this.querySelector('i');
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    });
});
</script>