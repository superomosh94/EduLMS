<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header text-center mb-4">
            <img src="/images/logo.png" alt="EduLMS Logo" class="auth-logo">
            <h2 class="auth-title">Welcome Back</h2>
            <p class="auth-subtitle">Sign in to your account</p>
        </div>
        
        <!-- Flash Messages -->
        <% if (success_msg && success_msg.length > 0) { %>
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <%= success_msg %>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        <% } %>
        
        <% if (error_msg && error_msg.length > 0) { %>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <%= error_msg %>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        <% } %>
        
        <form action="/auth/login" method="POST" class="auth-form">
            <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" 
                       value="<%= typeof oldInput !== 'undefined' && oldInput.email ? oldInput.email : '' %>" required>
            </div>
            
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="password-input-group">
                    <input type="password" class="form-control" id="password" name="password" required>
                    <button type="button" class="btn btn-outline-secondary toggle-password" data-target="password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="remember" name="remember">
                <label class="form-check-label" for="remember">Remember me</label>
            </div>
            
            <button type="submit" class="btn btn-primary w-100 mb-3">
                <i class="fas fa-sign-in-alt me-2"></i>Sign In
            </button>
            
            <div class="text-center">
                <a href="/auth/forgot-password" class="text-decoration-none">Forgot your password?</a>
            </div>
        </form>
        
        <div class="auth-footer text-center mt-4">
            <p class="mb-0">Don't have an account? <a href="/auth/register" class="text-decoration-none">Sign up</a></p>
        </div>
        
        <!-- Demo Accounts -->
        <div class="demo-accounts mt-4">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">Demo Accounts</h6>
                    <div class="demo-account-list">
                        <div class="demo-account">
                            <strong>Admin:</strong> admin@edulms.com / admin123
                        </div>
                        <div class="demo-account">
                            <strong>Student:</strong> student@edulms.com / student123
                        </div>
                        <div class="demo-account">
                            <strong>Instructor:</strong> instructor@edulms.com / instructor123
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.auth-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
}

.auth-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    padding: 2rem;
    width: 100%;
    max-width: 400px;
}

.auth-logo {
    height: 60px;
    margin-bottom: 1rem;
}

.auth-title {
    color: #333;
    margin-bottom: 0.5rem;
}

.auth-subtitle {
    color: #666;
    margin-bottom: 0;
}

.password-input-group {
    position: relative;
}

.toggle-password {
    position: absolute;
    right: 0;
    top: 0;
    height: 100%;
    border: none;
    background: transparent;
    border: none;
    padding: 0.375rem 0.75rem;
}

.toggle-password:hover {
    background-color: #f8f9fa;
}

.demo-accounts {
    font-size: 0.9rem;
}

.demo-account {
    padding: 0.25rem 0;
    border-bottom: 1px solid #eee;
    font-size: 0.85rem;
}

.demo-account:last-child {
    border-bottom: none;
}

.card-title {
    font-size: 0.95rem;
    margin-bottom: 0.75rem;
    color: #495057;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .auth-card {
        padding: 1.5rem;
        margin: 10px;
    }
    
    .demo-accounts {
        font-size: 0.8rem;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle password visibility
    document.querySelectorAll('.toggle-password').forEach(button => {
        button.addEventListener('click', function() {
            const targetId = this.dataset.target;
            const passwordInput = document.getElementById(targetId);
            const icon = this.querySelector('i');
            
            if (passwordInput && icon) {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            }
        });
    });

    // Quick login for demo accounts
    const demoAccounts = {
        'admin@edulms.com': 'admin123',
        'student@edulms.com': 'student123', 
        'instructor@edulms.com': 'instructor123'
    };

    // Add click handlers to demo accounts for quick login
    document.querySelectorAll('.demo-account').forEach(account => {
        account.style.cursor = 'pointer';
        account.addEventListener('click', function() {
            const text = this.textContent;
            const email = text.split(' ')[1]; // Get the email part
            
            if (demoAccounts[email]) {
                document.getElementById('email').value = email;
                document.getElementById('password').value = demoAccounts[email];
                
                // Show confirmation
                const originalText = this.innerHTML;
                this.innerHTML = '<span style="color: green;">âœ“ Click "Sign In" to login</span>';
                
                setTimeout(() => {
                    this.innerHTML = originalText;
                }, 3000);
            }
        });
    });
});
</script>